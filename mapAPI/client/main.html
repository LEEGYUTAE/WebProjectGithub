<template name="test1">
{{#if currentUser}}
    <style type="text/css">html, body {
        height: 100%;
        margin: 0;
        padding: 0;
    }

    #map {
        height: 50%;
    }
    </style>
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar"><span
                        class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
                <a class="navbar-brand" href="#">맛집GOGO</a></div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#">Home</a></li>
                    <li><a href="#">Page 1</a></li>
                    <li><a href="#" onclick="clearMarkers();">Hide Markers</a></li>
                    <li><a href="#" onclick="showMarkers();">Show All Markers</a></li>
                    <li><a href="#" onclick="deleteMarkers();">Delete Markers</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="#">{{PrintUsername}}<span class="glyphicon glyphicon-log-in"></span></a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div id="map"></div>

    <script>
        var map;
        var markers = [];
        var labels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        var labelIndex = 0;
        var infowindow;

        function initMap() {
            var haightAshbury = {lat: 35.152, lng: 129.056};
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 17,
                center: haightAshbury
            });
            google.maps.event.addListener(map, 'click', function (event) {
                console.log(event.latLng.lat());
                console.log(event.latLng.lng());
                lat = event.latLng.lat();
                lng = event.latLng.lng();
                addMarker(event.latLng, map);//클릭이벤트를 통한 마커생성
            });
            var contentString = '<div id="content">' +
                    '<div id="siteNotice">' +
                    '</div>' +
                    '<h1 id="firstHeading" class="firstHeading">좌표값</h1>' +
                    '<div id="bodyContent">' + '<form class="new-task">' +
                    '<input type="text" name="text" placeholder="Type to add new tasks"/>' +
                    '</form>' +
                    '</div>' +
                    '</div>';

            infowindow = new google.maps.InfoWindow({
                content: contentString
            });
        }

        function addMarker(location, map) {
            var marker = new google.maps.Marker({
                position: location,
                label: labels[labelIndex++ % labels.length],
                map: map,
                draggable: true,//마커를 움직일수 있게 하는 함수
                title: 'location (Ayers Rock)'
            });
            marker.addListener('click', function () {
                infowindow.open(map, marker);
            });
            markers.push(marker);//생성된 마커를 배열에 집어넣는다.
        }
        function setMapOnAll(map) {//모든 마커 출력함수
            for (var i = 0; i < markers.length; i++) {
                markers[i].setMap(map);
            }
        }

        function clearMarkers() {//모든 마커 삭제 함수
            setMapOnAll(null);
        }

        function showMarkers() {//모든마커를 출력하는것
            setMapOnAll(map);
        }

        function deleteMarkers() {//모든마커 삭제
            clearMarkers();
            markers = [];
            labelIndex = 0;
        }
    </script>

    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCBr1T8_N3_WeSy7GzDd0hmIWo5kiWm-sw&signed_in=true&callback=initMap">
    </script>

    {{/if}}
</template>

<body>
<!--{{>yield}}-->
</body>

<template name="rl">
    {{>yield}}
</template>

<!--<template name="task">-->
    <!--<li>{{text}}</li>-->
<!--</template>-->

<template name="login">
    <div style="..." class="well">
        <p>이름 : <input type="text" name="username"/></p>
        <p>암호 : <input type="password" name="password"/></p>
        <button class="btn" name="LogIn">LogIn</button>
        <button class="btn" name="SignUp">SignUp</button>
    </div>
</template>

<template name="signUp">
    <div style="..." class="well">
        <p>이름 : <input type="text" name="username"/></p>
        <p>암호 : <input type="password" name="password"/></p>
        <p>메일 : <input type="text" name="email"/></p>
        <p>별명 : <input type="text" name="nickname"/></p>
        <button class="btn" name="Cancel">Cancel</button>
        <button class="btn" name="Save">Save</button>
    </div>
</template>